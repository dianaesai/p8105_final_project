<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Data-analysis</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/journal.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="site_libs/anchor-sections-1.0/anchor-sections.js"></script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 61px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h2 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h3 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h4 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h5 {
  padding-top: 66px;
  margin-top: -66px;
}
.section h6 {
  padding-top: 66px;
  margin-top: -66px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="about.html">Introduction</a>
</li>
<li>
  <a href="casulties.html">COVID Impacts</a>
</li>
<li>
  <a href="preventions.html">Prevention Outcomes</a>
</li>
<li>
  <a href="dashboard.html">Dashboard</a>
</li>
<li>
  <a href="final_report.html">Conclusion</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Contact Us
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="mailto:&lt;des2190@cumc.columbia.edu&gt;">Diana Sanchez</a>
    </li>
    <li>
      <a href="mailto:&lt;cl4045@cumc.columbia.edu&gt;">Chong Li</a>
    </li>
    <li>
      <a href="mailto:&lt;ma3997@cumc.columbia.edu&gt;">Matthew Angulo</a>
    </li>
    <li>
      <a href="mailto:&lt;am5195@cumc.columbia.edu&gt;">Alexander Melamed</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://github.com/dianaesai/p8105_final_project.git">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://www.youtube.com/watch?v=oHg5SJYRHA0">
    <span class="fa fa-youtube fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Data-analysis</h1>

</div>


<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## -- Attaching packages --------------------------------------- tidyverse 1.3.0 --</code></pre>
<pre><code>## v ggplot2 3.3.2     v purrr   0.3.4
## v tibble  3.0.4     v dplyr   1.0.2
## v tidyr   1.1.2     v stringr 1.4.0
## v readr   1.4.0     v forcats 0.5.0</code></pre>
<pre><code>## -- Conflicts ------------------------------------------ tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>library(lubridate)</code></pre>
<pre><code>## 
## Attaching package: &#39;lubridate&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     date, intersect, setdiff, union</code></pre>
<pre class="r"><code>library(readr)
library(janitor)</code></pre>
<pre><code>## 
## Attaching package: &#39;janitor&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     chisq.test, fisher.test</code></pre>
<pre class="r"><code>library(patchwork)
library(scales)</code></pre>
<pre><code>## 
## Attaching package: &#39;scales&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:purrr&#39;:
## 
##     discard</code></pre>
<pre><code>## The following object is masked from &#39;package:readr&#39;:
## 
##     col_factor</code></pre>
<pre class="r"><code>library(moderndive)
library(stats)
library(skimr)
library(kableExtra)</code></pre>
<pre><code>## 
## Attaching package: &#39;kableExtra&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:dplyr&#39;:
## 
##     group_rows</code></pre>
<p>For this project we are using two datasets available from the CDC.</p>
<p>The first is a dataset that includes weekly estimates of expected deaths by week for each US states, as well as observed deaths. It is available for download here: <a href="https://data.cdc.gov/NCHS/Excess-Deaths-Associated-with-COVID-19/xkkf-xrst/" class="uri">https://data.cdc.gov/NCHS/Excess-Deaths-Associated-with-COVID-19/xkkf-xrst/</a></p>
<pre class="r"><code>excess_deaths &lt;- read_csv(&quot;data/Excess_Deaths_Associated_with_COVID-19.csv&quot;) %&gt;% 
  clean_names() %&gt;% 
  rename(end_week=week_ending_date) %&gt;% 
  filter(type==&quot;Predicted (weighted)&quot;&amp;outcome==&quot;All causes&quot;) </code></pre>
<p>The second dataset includes the weekly counts of COVID-19 related deaths in each US state. And is available here: <a href="https://data.cdc.gov/NCHS/Provisional-COVID-19-Death-Counts-by-Week-Ending-D/r8kw-7aab" class="uri">https://data.cdc.gov/NCHS/Provisional-COVID-19-Death-Counts-by-Week-Ending-D/r8kw-7aab</a></p>
<pre class="r"><code>covid_deaths &lt;- read_csv(&quot;data/Provisional_COVID-19_Death_Counts_by_Week_Ending_Date_and_State.csv&quot;) %&gt;% 
  clean_names() %&gt;%
  mutate(end_week=mdy(end_week))%&gt;%
  select(end_week,state,covid_19_deaths,total_deaths,percent_of_expected_deaths,pneumonia_deaths, pneumonia_and_covid_19_deaths, influenza_deaths, pneumonia_influenza_or_covid_19_deaths) 

merged_data &lt;- inner_join(covid_deaths,excess_deaths) %&gt;% 
  mutate(excess_non_covid=excess_higher_estimate-covid_19_deaths)</code></pre>
<p>These datasets are updated frequently. This analysis is based on data downloaded on December 1, 2020. Also because death reporting takes time this analysis focuses on deaths reported through the end of October 2020.</p>
<p>To explore the relationship between excess deaths, deaths attributed to COVID-19, and excess deaths that were not attributed to COVID-19, we generated time series plots for these quantities for the entire nation.</p>
<pre class="r"><code>panel1=merged_data %&gt;% 
  filter(state==&quot;United States&quot;) %&gt;% 
   ggplot(aes(x=end_week,y=covid_19_deaths))+
   labs(x = &quot;Date&quot;, y = &quot;COVID-19 deaths&quot;) +
   geom_point(alpha=0.5, size=3)+
   geom_smooth(se=FALSE, span=0.2) +
    scale_x_date(
    labels = date_format(&quot;%m-%Y&quot;),
    breaks= c(as.Date(&quot;2020/2/1&quot;),as.Date(&quot;2020/5/1&quot;),as.Date(&quot;2020/8/1&quot;), as.Date(&quot;2020/11/1&quot;)),
    limits= c(as.Date(&quot;2020/2/1&quot;), as.Date(&quot;2020/10/31&quot;)))+
  theme(axis.text.x=element_text(angle=45,hjust=1))+
   scale_y_continuous(limits=c(-1000, 25000))


panel2= merged_data  %&gt;% 
  filter(state==&quot;United States&quot;) %&gt;% 
   ggplot(aes(x=end_week,y=excess_higher_estimate))+
   labs(x = &quot;Date&quot;, y = &quot;Excess deaths&quot;) +
   geom_point(alpha=0.5, size=3)+
   geom_smooth(se=FALSE, span=0.2) +
    scale_x_date(
    labels = date_format(&quot;%m-%Y&quot;),
    breaks= c(as.Date(&quot;2020/2/1&quot;),as.Date(&quot;2020/5/1&quot;),as.Date(&quot;2020/8/1&quot;), as.Date(&quot;2020/11/1&quot;)),
    limits= c(as.Date(&quot;2020/2/1&quot;), as.Date(&quot;2020/10/31&quot;)))+
  theme(axis.text.x=element_text(angle=45,hjust=1))+
   scale_y_continuous(limits=c(-1000, 25000))

panel3=
 merged_data %&gt;%
  filter(state==&quot;United States&quot;) %&gt;% 
  ggplot(aes(x=end_week,y=excess_non_covid))+
   labs(x = &quot;Date&quot;, y = &quot;Excess deaths not attributed to COVID-19&quot;) +
   geom_point(alpha=0.5, size=3)+
   geom_smooth(se=FALSE, span=0.2) +
    scale_x_date(
    labels = date_format(&quot;%m-%Y&quot;),
    breaks= c(as.Date(&quot;2020/2/1&quot;),as.Date(&quot;2020/5/1&quot;),as.Date(&quot;2020/8/1&quot;), as.Date(&quot;2020/11/1&quot;)),
    limits= c(as.Date(&quot;2020/2/1&quot;), as.Date(&quot;2020/10/31&quot;)))+
  theme(axis.text.x=element_text(angle=45,hjust=1))+
   scale_y_continuous(limits=c(-1000, 25000))

panel2 + panel1 + panel3</code></pre>
<p><img src="analysis_files/figure-html/unnamed-chunk-4-1.png" width="672" /> This code chunk calculates the number of excess deaths, covid deaths, and excess non-covid deaths in the United States from February through October 2020.</p>
<pre class="r"><code>merged_data %&gt;% 
  filter(state==&quot;United States&quot; &amp; end_week &lt; as.Date(&quot;2020-11-1&quot;)) %&gt;% 
  summarise(
    excess_deaths=sum(excess_higher_estimate),
    covid_deaths=sum(covid_19_deaths),
    excess_not_covid=sum(excess_higher_estimate)-sum(covid_19_deaths)) %&gt;% 
   kbl(caption=&quot;Excess and Covid Deaths in the United States: Feb-October, 2020&quot;, digits = 1) %&gt;% kable_classic()</code></pre>
<table class=" lightable-classic" style='font-family: "Arial Narrow", "Source Sans Pro", sans-serif; margin-left: auto; margin-right: auto;'>
<caption>
Excess and Covid Deaths in the United States: Feb-October, 2020
</caption>
<thead>
<tr>
<th style="text-align:right;">
excess_deaths
</th>
<th style="text-align:right;">
covid_deaths
</th>
<th style="text-align:right;">
excess_not_covid
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
322742
</td>
<td style="text-align:right;">
228524
</td>
<td style="text-align:right;">
94218
</td>
</tr>
</tbody>
</table>
<p>Approximately 1/3 of excess deaths were not attributed to COVID.</p>
<p>Next I was interested in getting a sense of whether the rate of excess non-COVID-19 deaths varied across States.</p>
<p>In the next code chunk I aggregate the data by state over the entire period, merge the data with another data set containing state level population estimates for 2020. I then calculate rates of COVID-19 deaths, excess deaths, and excess deaths not attributable to COVID-19 (per 100,000 residents) for each state, and calculate the median and intraquartile range for these quatities.</p>
<pre class="r"><code>states= merged_data %&gt;% 
  group_by(state) %&gt;% 
  filter(end_week &lt; as.Date(&quot;2020-11-1&quot;) &amp; state !=&quot;United States&quot; &amp; state!=&quot;New York City&quot;) %&gt;% 
  filter(!is.na(covid_19_deaths)) %&gt;% 
  filter(!is.na(excess_higher_estimate)) %&gt;% 
  summarise(
    excess_deaths=sum(excess_higher_estimate),
    covid_deaths=sum(covid_19_deaths),
    excess_not_covid=sum(excess_higher_estimate)-sum(covid_19_deaths)) </code></pre>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<pre class="r"><code>state_pop &lt;- read_csv(&quot;data/State_Populations.csv&quot;) %&gt;% 
  clean_names()</code></pre>
<pre><code>## 
## -- Column specification --------------------------------------------------------
## cols(
##   State = col_character(),
##   Population = col_double()
## )</code></pre>
<pre class="r"><code>states=right_join(states,state_pop) %&gt;% 
  mutate(excess_death_r=excess_deaths/population*100000) %&gt;% 
  mutate(covid_death_r=covid_deaths/population*100000) %&gt;% 
  mutate(excess_not_covid_r=excess_not_covid/population*100000)</code></pre>
<pre><code>## Joining, by = &quot;state&quot;</code></pre>
<pre class="r"><code>states %&gt;% 
  select(excess_death_r, covid_death_r, excess_not_covid_r) %&gt;% 
  rename(excess_death_rate=excess_death_r,covid_death_rate=covid_death_r,excess_deaths_not_from_covid_rate=excess_not_covid_r) %&gt;% 
  skim_without_charts() %&gt;% 
  select(skim_variable, numeric.p50, numeric.p25, numeric.p75) %&gt;% 
  rename(Rate=skim_variable, Median=numeric.p50, p25=numeric.p25, p75th=numeric.p75) %&gt;% 
   kbl(caption=&quot;Rates of excess and COVID-19 deaths (per 100,000 residents) among US States and District of Columbia: Feb-October, 2020&quot;, digits = 1) %&gt;% 
  kable_classic() </code></pre>
<table class=" lightable-classic" style='font-family: "Arial Narrow", "Source Sans Pro", sans-serif; margin-left: auto; margin-right: auto;'>
<caption>
Rates of excess and COVID-19 deaths (per 100,000 residents) among US States and District of Columbia: Feb-October, 2020
</caption>
<thead>
<tr>
<th style="text-align:left;">
Rate
</th>
<th style="text-align:right;">
Median
</th>
<th style="text-align:right;">
p25
</th>
<th style="text-align:right;">
p75th
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
excess_death_rate
</td>
<td style="text-align:right;">
82.1
</td>
<td style="text-align:right;">
65.5
</td>
<td style="text-align:right;">
108.0
</td>
</tr>
<tr>
<td style="text-align:left;">
covid_death_rate
</td>
<td style="text-align:right;">
52.3
</td>
<td style="text-align:right;">
39.0
</td>
<td style="text-align:right;">
70.5
</td>
</tr>
<tr>
<td style="text-align:left;">
excess_deaths_not_from_covid_rate
</td>
<td style="text-align:right;">
27.7
</td>
<td style="text-align:right;">
19.7
</td>
<td style="text-align:right;">
40.9
</td>
</tr>
</tbody>
</table>
<p>This state-level dataset is used to visually explore the relationships between state-level COVID-19 death rates, excess mortality rates, and rates of excess non-COVID-19 mortality per 100,000 residents.</p>
<pre class="r"><code>panel4 = states %&gt;% 
 ggplot( aes(x=covid_death_r,y=excess_not_covid_r, size=population))+
   labs(x = &quot;COVID-19 deaths \n per 100,000 residents&quot;, y = &quot;Excess COVID-19 deaths not attributed\n to COVID-19 per 100,000 residents&quot;) +
   geom_point(alpha=0.5)+
  geom_smooth(weight=&quot;population&quot;)+
  theme(legend.position = &quot;none&quot;) +
  scale_y_continuous(limits=c(0, 300))


panel5 = states %&gt;% 
 ggplot( aes(x=covid_death_r,y=excess_death_r, size=population))+
   labs(x = &quot;COVID-19 deaths \n per 100,000 residents&quot;, y = &quot;Excess deaths \n per 100,000 residents&quot;) +
   geom_point(alpha=0.5)+
  geom_smooth(, weight=&quot;population&quot;)+
 theme(legend.position = &quot;none&quot;) +
  scale_y_continuous(limits=c(0, 300))

panel4 + panel5</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<pre><code>## Warning: Removed 3 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning: Removed 3 rows containing missing values (geom_point).</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<pre><code>## Warning: Removed 1 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning: Removed 1 rows containing missing values (geom_point).</code></pre>
<p><img src="analysis_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>We explore whether the duration of stay at home orders are associated with excess non-covid related mortality. We import and link data on the lengths of each states stay-at-home-orders based on information aggregated from by the National Academy of State Health Policy (<a href="https://www.nashp.org/governors-prioritize-health-for-all/" class="uri">https://www.nashp.org/governors-prioritize-health-for-all/</a>). We join these data to our state level data set plot stay-at-home order duratoin vs non-covid-19 excess mortality rates.</p>
<pre class="r"><code>stay_at_home_orders &lt;- read_csv(&quot;data/stay_at_home_orders_final.csv&quot;, 
    col_types = cols(Start = col_date(format = &quot;%m/%d/%Y&quot;), 
        End = col_date(format = &quot;%m/%d/%Y&quot;))) %&gt;% 
  clean_names() %&gt;% 
  mutate(stay_at_home=if_else(length==0,FALSE,TRUE))

states=right_join(states,stay_at_home_orders)</code></pre>
<pre><code>## Joining, by = &quot;state&quot;</code></pre>
<pre class="r"><code>states %&gt;% 
 ggplot( aes(x=length,y=excess_not_covid_r, size=population))+
   labs(x = &quot;Length of stay-at-home order (days)&quot;, y = &quot;Excess COVID-19 deaths not attributed\n to COVID-19 per 100,000 residents&quot;) +
   geom_point(alpha=0.5)+
  geom_smooth(, weight=&quot;population&quot;)+
 theme(legend.position = &quot;none&quot;) +
  scale_y_continuous(limits=c(0, 100))</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<pre><code>## Warning: Removed 2 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning: Removed 2 rows containing missing values (geom_point).</code></pre>
<p><img src="analysis_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>Finally we fit some regression models to evaluate several hypothesis.</p>
<p>First we evaluate the hypothesis (which is pretty obvious) that state excess mortality rate during the COVID epidemic is associated with COVID-19 mortality. We fit a bivariable linear regression model, with cluster robust standard errors.</p>
<pre class="r"><code>library(miceadds)</code></pre>
<pre><code>## Loading required package: mice</code></pre>
<pre><code>## 
## Attaching package: &#39;mice&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:stats&#39;:
## 
##     filter</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     cbind, rbind</code></pre>
<pre><code>## * miceadds 3.10-28 (2020-07-29 21:56:24)</code></pre>
<pre class="r"><code>mod1 &lt;- lm.cluster(excess_death_r ~ covid_death_r, data = states, cluster=&quot;state&quot;)</code></pre>
<pre><code>## Loading required namespace: sandwich</code></pre>
<pre class="r"><code>summary(mod1) </code></pre>
<pre><code>## R^2= 0.84055 
## 
##                Estimate Std. Error   t value     Pr(&gt;|t|)
## (Intercept)   20.490304  5.8769983  3.486525 4.893389e-04
## covid_death_r  1.174205  0.1071758 10.955872 6.227541e-28</code></pre>
<pre class="r"><code>confint(mod1) </code></pre>
<pre><code>##                   2.5 %    97.5 %
## (Intercept)   8.9715989 32.009009
## covid_death_r 0.9641438  1.384265</code></pre>
<p>Accounting for state-level clustering, we found a statistically significant association between the COVID-19 death rate and the excess mortality rate among US states (p&lt;0.001). Each additional death per 100,000 residents was associated was 1.2 excess deaths per 100,000 individuals (95% CI 0.9 to 1.4). We observed that 84% in the variability in excess mortality among states was explained by the COVID-19 death rate.</p>
<p>Next we evaluated the less obvious hypothesis that the rate of excess death not attributable to COVID-19 was associated with the COVID-19 death rate. We fit a similar model:</p>
<pre class="r"><code>mod2 &lt;- lm.cluster(excess_not_covid_r ~ covid_death_r, data = states, cluster=&quot;state&quot;)
summary(mod2) </code></pre>
<pre><code>## R^2= 0.10396 
## 
##                 Estimate Std. Error  t value     Pr(&gt;|t|)
## (Intercept)   20.4903038  5.8769983 3.486525 0.0004893389
## covid_death_r  0.1742046  0.1071758 1.625409 0.1040753359</code></pre>
<pre class="r"><code>confint(mod2) </code></pre>
<pre><code>##                     2.5 %     97.5 %
## (Intercept)    8.97159886 32.0090088
## covid_death_r -0.03585615  0.3842653</code></pre>
<p>There was no statistically significant association between the rate of excess deaths not attributed to COVID-19 and the rate of COVID-19 mortality (p=0.10).</p>
<p>Finally we fit a linear model (which accounts for clustering at the state level), to tests the hypothesis that the duration of a states lock down is associated with excess mortality to attributed to COVID=19.</p>
<pre class="r"><code>library(miceadds)
mod3 &lt;- lm.cluster(excess_not_covid_r ~ length, data = states, cluster=&quot;state&quot;)
summary(mod3)</code></pre>
<pre><code>## R^2= 0.01246 
## 
##               Estimate Std. Error    t value     Pr(&gt;|t|)
## (Intercept) 34.5792313  4.4984495  7.6869223 1.507166e-14
## length      -0.0946756  0.0965685 -0.9803984 3.268895e-01</code></pre>
<pre class="r"><code>confint(mod3) </code></pre>
<pre><code>##                  2.5 %      97.5 %
## (Intercept) 25.7624324 43.39603024
## length      -0.2839464  0.09459518</code></pre>
<p>Modeling lockdown duration as a continuous variable with a linear relationship with excess mortality, We found no statistically significant relationship between length of lock down and excess deaths not attributed to COVID-19 (p=0.33)</p>
<p>We fit another model modeling lock downs as a present/absent variable</p>
<pre class="r"><code>mod4 &lt;- lm.cluster(excess_not_covid_r ~ stay_at_home, data = states, cluster=&quot;state&quot;)
summary(mod4)</code></pre>
<pre><code>## R^2= 0.00607 
## 
##                   Estimate Std. Error   t value     Pr(&gt;|t|)
## (Intercept)      26.589738   4.370597 6.0837768 1.173840e-09
## stay_at_homeTRUE  4.474564   5.261647 0.8504113 3.950964e-01</code></pre>
<pre class="r"><code>confint(mod4) </code></pre>
<pre><code>##                      2.5 %   97.5 %
## (Intercept)      18.023525 35.15595
## stay_at_homeTRUE -5.838074 14.78720</code></pre>
<p>Again, while states with lockdowns had a rates of excess deaths that were not attributed to COVID-19 that were higher by 4.5 per 100,000 residents (95% CI -5.8 to 14.8), this association was not statistically significant (p=0.40).</p>

<!DOCTYPE html>

 
<hr />
<p style="text-align: center;">
Matthew Angulo (ma3997), Chong Li (cl4045), Alexander Melamed (am5195), Diana Sanchez (des2190)
</p>

<p style="text-align: center;">
Data Science Fall 2020
</p>

<p> </p>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
